<!DOCTYPE html>
<html>
<head>
  <title>Binaural Beat Generator</title>
  <style>
    body {
      text-align: center;
      font-family: Arial, sans-serif;
    }
    
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
    }
    
    .info {
      margin: 20px auto;
      max-width: 600px;
      text-align: left;
    }
    
    #currentFrequency {
      font-size: 24px;
      font-weight: bold;
      margin-top: 20px;
    }
    
    #notableFrequencies {
      margin-top: 20px;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>Binaural Beat Generator</h1>
  <div class="info">
    <h3>Choose the correct frequencies for different binaural beat patterns:</h3>
    <ul>
      <li><strong>Delta pattern:</strong> Binaural beats in the delta pattern operate at a frequency of 0.5–4 Hz with links to a dreamless sleep. In the study, people who received a delta pattern frequency during sleep entered a deeper stage of sleep, according to electroencephalogram (EEG) brain scan results.</li>
      <li><strong>Theta pattern:</strong> Practitioners set binaural beats in the theta pattern to a frequency of 4–7 Hz. Theta patterns contribute to improved meditation, creativity, and sleep in the rapid eye movement (REM) phase.</li>
      <li><strong>Alpha pattern:</strong> Binaural beats in the alpha pattern are at a frequency of 7–13 Hz and may encourage relaxation.</li>
      <li><strong>Beta pattern:</strong> Binaural beats in the beta pattern are at a frequency of 13–30 Hz. This frequency range may help promote concentration and alertness. However, it can also increase anxiety at the higher end of the range.</li>
      <li><strong>Gamma pattern:</strong> This frequency pattern accounts for a range of 30–50 Hz. The study authors suggest that these frequencies promote maintenance of arousal while a person is awake.</li>
    </ul>
  </div>
  <label for="baseFrequency">Base Frequency (Hz):</label>
  <input type="number" id="baseFrequency" value="110" min="20" max="1000" step="1">
  <br><br>
  <label for="startFrequency">Start Frequency (Hz):</label>
  <input type="number" id="startFrequency" value="0.5" min="0.5" max="50" step="0.1">
  <br><br>
  <label for="endFrequency">End Frequency (Hz):</label>
  <input type="number" id="endFrequency" value="4" min="0.5" max="50" step="0.1">
  <br><br>
  <label for="duration">Session Duration (minutes):</label>
  <input type="number" id="duration" value="10" min="1" max="60" step="1">
  <br><br>
  <button id="startButton">Start</button>
  <button id="stopButton" disabled>Stop</button>
  
  <div id="currentFrequency"></div>
  
  <div id="notableFrequencies">
    <h3>Notable Frequencies:</h3>
    <ul id="frequencyList"></ul>
  </div>

  <script>
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let oscillatorLeft;
    let oscillatorRight;
    let playing = false;

    const startButton = document.getElementById('startButton');
    const stopButton = document.getElementById('stopButton');
    const baseFrequencyInput = document.getElementById('baseFrequency');
    const startFrequencyInput = document.getElementById('startFrequency');
    const endFrequencyInput = document.getElementById('endFrequency');
    const durationInput = document.getElementById('duration');
    const currentFrequencyDisplay = document.getElementById('currentFrequency');
    const frequencyList = document.getElementById('frequencyList');

    startButton.addEventListener('click', startBinauralBeat);
    stopButton.addEventListener('click', stopBinauralBeat);
    document.addEventListener('keydown', handleKeyDown);

    function startBinauralBeat() {
      if (!playing) {
        const baseFrequency = parseFloat(baseFrequencyInput.value);
        const startFrequency = parseFloat(startFrequencyInput.value);
        const endFrequency = parseFloat(endFrequencyInput.value);
        const duration = parseFloat(durationInput.value) * 60; // Convert minutes to seconds

        oscillatorLeft = audioContext.createOscillator();
        oscillatorRight = audioContext.createOscillator();

        oscillatorLeft.type = 'sine';
        oscillatorRight.type = 'sine';

        oscillatorLeft.frequency.value = baseFrequency;
        oscillatorRight.frequency.value = baseFrequency + startFrequency;

        oscillatorLeft.connect(audioContext.destination);
        oscillatorRight.connect(audioContext.destination);

        oscillatorLeft.start();
        oscillatorRight.start();

        // Set up the frequency sweep
        const frequencyDifference = endFrequency - startFrequency;
        const frequencyStep = frequencyDifference / (duration * 100); // 100 steps per second
        let currentFrequency = startFrequency;

        const sweepInterval = setInterval(() => {
          currentFrequency += frequencyStep;
          oscillatorRight.frequency.value = baseFrequency + currentFrequency;
          currentFrequencyDisplay.textContent = `Current Frequency: ${(baseFrequency + currentFrequency).toFixed(2)} Hz`;

          if (currentFrequency >= endFrequency) {
            clearInterval(sweepInterval);
            stopBinauralBeat();
          }
        }, 10); // 10 ms interval for smoother sweep

        playing = true;
        startButton.disabled = true;
        stopButton.disabled = false;
      }
    }

    function stopBinauralBeat() {
      if (playing) {
        oscillatorLeft.stop();
        oscillatorRight.stop();
        playing = false;
        startButton.disabled = false;
        stopButton.disabled = true;
        currentFrequencyDisplay.textContent = '';
      }
    }

    function handleKeyDown(event) {
      if (event.code === 'Space' && playing) {
        const currentFrequency = oscillatorRight.frequency.value;
        const listItem = document.createElement('li');
        listItem.textContent = `${currentFrequency.toFixed(2)} Hz`;
        frequencyList.appendChild(listItem);
      }
    }
  </script>
</body>
</html>